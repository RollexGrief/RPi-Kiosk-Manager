# RPi Kiosk Manager

–≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–µ–∂–∏–º–æ–º –∫–∏–æ—Å–∫–∞ (Digital Signage) –Ω–∞ Raspberry Pi. –í –∫–∞—á–µ—Å—Ç–≤–µ –±—Ä–∞—É–∑–µ—Ä–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è **Firefox ESR**, –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Å —É—Å—Ç–∞—Ä–µ–≤—à–∏–º–∏ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞–º–∏ –∏ —Ä–∞–±–æ—Ç—ã –≤ —É—Å–ª–æ–≤–∏—è—Ö –Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω–æ–π —Å–µ—Ç–∏.

## ‚ö†Ô∏è –°–∏—Å—Ç–µ–º–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

–î–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã —Å–∫—Ä–∏–ø—Ç–∞ –∏ –ø–ª–∞–≤–Ω–æ–≥–æ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞ **—Å—Ç—Ä–æ–≥–æ** —Ç—Ä–µ–±—É—é—Ç—Å—è:

* **–û–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ:** Raspberry Pi 4/5 (–º–∏–Ω–∏–º—É–º **8 –ì–ë RAM**).
* **–û–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞:** Raspberry Pi OS **Lite** (–≤–µ—Ä—Å–∏—è **64-bit**).
    * *–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:* –ù–µ–æ–±—Ö–æ–¥–∏–º–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏–º–µ–Ω–Ω–æ Lite –≤–µ—Ä—Å–∏—é (–±–µ–∑ —Ä–∞–±–æ—á–µ–≥–æ —Å—Ç–æ–ª–∞), —Ç–∞–∫ –∫–∞–∫ —Å–∫—Ä–∏–ø—Ç —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç Xorg –∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–π –º–∏–Ω–∏–º—É–º –≥—Ä–∞—Ñ–∏—á–µ—Å–∫–æ–π –æ–±–æ–ª–æ—á–∫–∏.

## ‚ú® –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

* **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Å—Ç–∞—Ä—ã—Ö –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤:** –í–∫–ª—é—á–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ **TLS 1.0/1.1** (—á–µ—Ä–µ–∑ `security.tls.version.min = 1`), —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ—Ç–∫—Ä—ã–≤–∞—Ç—å —Å—Ç–∞—Ä—ã–µ –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã–µ –ø–æ—Ä—Ç–∞–ª—ã –∏ –ª–æ–∫–∞–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã.
* **–û—Ñ–ª–∞–π–Ω-—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å:**
    * –í–∫–ª—é—á–µ–Ω –¥–∏—Å–∫–æ–≤—ã–π –∫—ç—à (–ª–∏–º–∏—Ç 1 –ì–ë).
    * –û—Ç–∫–ª—é—á–µ–Ω–∞ –æ—á–∏—Å—Ç–∫–∞ –∫—ç—à–∞ –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏.
    * *LocalStorage —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è* –ø—Ä–∏ –æ—á–∏—Å—Ç–∫–µ –∫—ç—à–∞ (–Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–ª–µ–µ—Ä–æ–≤/–ø–ª–µ–π–ª–∏—Å—Ç—ã –Ω–µ —Å–±—Ä–∞—Å—ã–≤–∞—é—Ç—Å—è).
* **–ê–≤—Ç–æ–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ:** –ë—Ä–∞—É–∑–µ—Ä –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –≤ –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ–º —Ü–∏–∫–ª–µ ‚Äî –ø—Ä–∏ –ø–∞–¥–µ–Ω–∏–∏ –æ–Ω –æ—Ç–∫—Ä–æ–µ—Ç—Å—è —Å–Ω–æ–≤–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.
* **Kiosk Mode:** –ü–æ–ª–Ω—ã–π —ç–∫—Ä–∞–Ω, —Å–∫—Ä—ã—Ç–∏–µ –∫—É—Ä—Å–æ—Ä–∞ –º—ã—à–∏ (`unclutter`), –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π –æ –ø–∞–¥–µ–Ω–∏–∏ —Å–µ—Å—Å–∏–∏.
* **–ú—É–ª—å—Ç–∏–º–µ–¥–∏–∞:** –ü—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –∫–æ–¥–µ–∫–∏ `ffmpeg` –∏ `libavcodec-extra`.

## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

1.  –ó–∞–≥—Ä—É–∑–∏—Ç–µ –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ **Raspberry Pi OS Lite 64-bit**.
2.  –°–∫–∞—á–∞–π—Ç–µ —Å–∫—Ä–∏–ø—Ç –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ (–∏–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª –≤—Ä—É—á–Ω—É—é):
    ```bash
    nano kiosk_manager.sh
    # –í—Å—Ç–∞–≤—å—Ç–µ –∫–æ–¥ —Å–∫—Ä–∏–ø—Ç–∞ –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç–µ (Ctrl+O, Enter, Ctrl+X)
    ```
3.  –î–∞–π—Ç–µ –ø—Ä–∞–≤–∞ –Ω–∞ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–µ:
    ```bash
    chmod +x kiosk_manager.sh
    ```
4.  –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç —Å –ø—Ä–∞–≤–∞–º–∏ —Å—É–ø–µ—Ä–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:
    ```bash
    sudo ./kiosk_manager.sh
    ```

## üõ† –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –º–µ–Ω—é

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –≤—ã —É–≤–∏–¥–∏—Ç–µ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–µ –º–µ–Ω—é:

### 1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Kiosk Mode (—Å –Ω—É–ª—è)
* –í—ã–ø–æ–ª–Ω—è–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã (`apt update`).
* –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç Xorg, Firefox ESR, –¥—Ä–∞–π–≤–µ—Ä—ã –≤–∏–¥–µ–æ.
* –°–æ–∑–¥–∞–µ—Ç —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π –ø—Ä–æ—Ñ–∏–ª—å Firefox —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏.
* –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫ (autologin + startx).
* *–ó–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç URL, —à–∏—Ä–∏–Ω—É –∏ –≤—ã—Å–æ—Ç—É —ç–∫—Ä–∞–Ω–∞.*

### 2. –°–º–µ–Ω–∏—Ç—å —Å—Å—ã–ª–∫—É –Ω–∞ —Å–∞–π—Ç
* –ü–æ–∑–≤–æ–ª—è–µ—Ç –±—ã—Å—Ç—Ä–æ –ø–æ–º–µ–Ω—è—Ç—å URL –±–µ–∑ –ø–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∫–∏.
* –ë—Ä–∞—É–∑–µ—Ä –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å –Ω–æ–≤—ã–º –∞–¥—Ä–µ—Å–æ–º.

### 3. –°–º–µ–Ω–∏—Ç—å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ —ç–∫—Ä–∞–Ω–∞
* –ó–∞–¥–∞–µ—Ç –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–∞–∑–º–µ—Ä—ã –æ–∫–Ω–∞ –±—Ä–∞—É–∑–µ—Ä–∞ (—Ñ–ª–∞–≥–∏ `--width` –∏ `--height`).
* –ü–æ–ª–µ–∑–Ω–æ –¥–ª—è –Ω–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö –¥–∏—Å–ø–ª–µ–µ–≤ –∏–ª–∏ LED-–∫–∞–±–∏–Ω–µ—Ç–æ–≤.

### 4. –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å –±—Ä–∞—É–∑–µ—Ä
* –£–±–∏–≤–∞–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å Firefox. –°–∫—Ä–∏–ø—Ç-—Å—Ç–æ—Ä–æ–∂ (`.xinitrc`) –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç –µ–≥–æ —á–µ—Ä–µ–∑ 2 —Å–µ–∫—É–Ω–¥—ã.

### 5. –û—á–∏—Å—Ç–∏—Ç—å –∫–µ—à –±—Ä–∞—É–∑–µ—Ä–∞
* –£–¥–∞–ª—è–µ—Ç –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã (–∫–∞—Ä—Ç–∏–Ω–∫–∏, –≤–∏–¥–µ–æ), –Ω–æ **–æ—Å—Ç–∞–≤–ª—è–µ—Ç LocalStorage**.
* –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ—Å–≤–æ–±–æ–¥–∏—Ç—å –º–µ—Å—Ç–æ, –Ω–µ —Å–±–∏–≤–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤–µ–±-–ø–ª–µ–µ—Ä–æ–≤ –∏–ª–∏ –¥–∞–Ω–Ω—ã–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏.

## üìÇ –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è (–¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤)

* **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:** –ù–∞—Å—Ç—Ä–æ–π–∫–∏ (URL, —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ) —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ `/home/pi/kiosk.conf`.
* **–ü—Ä–æ—Ñ–∏–ª—å Firefox:** `/home/pi/.mozilla/firefox/kiosk.default`.
    * –§–∞–π–ª `user.js` –≤ —ç—Ç–æ–π –ø–∞–ø–∫–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è, –æ—Ç–∫–ª—é—á–∞–µ—Ç —Ç–µ–ª–µ–º–µ—Ç—Ä–∏—é –∏ —Ä–∞–∑—Ä–µ—à–∞–µ—Ç –Ω–µ–±–µ–∑–æ–ø–∞—Å–Ω—ã–µ SSL-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è.
* **–õ–æ–≥–∏–∫–∞ –∑–∞–ø—É—Å–∫–∞:**
    1.  `~/.bash_profile` –∑–∞–ø—É—Å–∫–∞–µ—Ç `startx`, –µ—Å–ª–∏ —Å–µ—Å—Å–∏—è –æ—Ç–∫—Ä—ã—Ç–∞ –≤ TTY1.
    2.  `~/.xinitrc` –∑–∞–ø—É—Å–∫–∞–µ—Ç –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã–π —Ü–∏–∫–ª `while true`, –∫–æ—Ç–æ—Ä—ã–π —á–∏—Ç–∞–µ—Ç –∫–æ–Ω—Ñ–∏–≥ –∏ –≤—ã–∑—ã–≤–∞–µ—Ç `firefox-esr --kiosk`.
* **–ë—ç–∫–∞–ø:** –ü—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ URL –∫–æ–ø–∏—è –∫–æ–Ω—Ñ–∏–≥–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ `/boot/kiosk.conf` (–¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —á–µ—Ä–µ–∑ –∫–∞—Ä—Ç—Ä–∏–¥–µ—Ä, –µ—Å–ª–∏ —Å–µ—Ç—å –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞).

## ‚ùì –†–µ—à–µ–Ω–∏–µ —á–∞—Å—Ç—ã—Ö –ø—Ä–æ–±–ª–µ–º

**–í–æ–ø—Ä–æ—Å:** –≠–∫—Ä–∞–Ω —á–µ—Ä–Ω—ã–π –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏.
**–û—Ç–≤–µ—Ç:** –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—ã –≤—ã–±—Ä–∞–ª–∏ `autologin` -> `Console Autologin` (B2) –≤ `raspi-config`. –°–∫—Ä–∏–ø—Ç –¥–µ–ª–∞–µ—Ç —ç—Ç–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏, –Ω–æ –∏–Ω–æ–≥–¥–∞ —Ç—Ä–µ–±—É–µ—Ç—Å—è —Ä—É—á–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞.

**–í–æ–ø—Ä–æ—Å:** –í–∏–¥–µ–æ —Ç–æ—Ä–º–æ–∑–∏—Ç –∏–ª–∏ –∏–¥–µ—Ç —Ä—ã–≤–∫–∞–º–∏.
**–û—Ç–≤–µ—Ç:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ RPi 4. –í `/boot/config.txt` (–∏–ª–∏ `/boot/firmware/config.txt`) –º–æ–∂–Ω–æ –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —É–≤–µ–ª–∏—á–∏—Ç—å –ø–∞–º—è—Ç—å GPU (`gpu_mem=256`), —Ö–æ—Ç—è –¥–ª—è 64-–±–∏—Ç–Ω–æ–π –û–° —ç—Ç–æ –æ–±—ã—á–Ω–æ —É–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏.

**–í–æ–ø—Ä–æ—Å:** –ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∑–≤—É–∫ —á–µ—Ä–µ–∑ HDMI.
**–û—Ç–≤–µ—Ç:** –°–∫—Ä–∏–ø—Ç —Ñ–æ—Ä—Å–∏—Ä—É–µ—Ç `hdmi_force_hotplug=1`. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –∞—É–¥–∏–æ –≤—ã–±—Ä–∞–Ω –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –≤—ã–≤–æ–¥ (`raspi-config` -> System Options -> Audio).

_Developed with ‚ù§Ô∏è by Rudi._
